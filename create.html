<!DOCTYPE html>

<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title> Pokemon Battle Mod</title>

		<link rel="stylesheet" href="./index.css" />
		<script src="/config/config.js"></script>
	
	</head>

	<body>
		<!-- partial:index.partial.html -->

		<section>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>
			<span></span> <span></span> <span></span> <span></span> <span></span>

			<div class="signin">
				<div class="content">
					<h2>Create A Battle!</h2>

					<div class="form">
						<div class="inputBox">
							<input type="text" id="code" required  /> <i>Enter Format (ex. gen7ou)</i>
						</div>

						<div class="inputBox">
							<textarea cols="20" rows="10" id="team1" placeholder="Team 1" style="color:black;font-weight: 900;"></textarea> 
                            <textarea  cols="20" rows="10" id="team2" placeholder="Team 2" style="color:black;font-weight: 900;"></textarea> 
						</div>
						<div class="inputBox"><input type="checkbox" id="allow"/><i>Allow Player Teams </i> </div>
                   
                        <small style="color: white;">

                            If you are not sure what to enter in Teams, refer <a href="https://pastebin.com/raw/MrM38zep" style="color:yellow;"> this</a> 


                        </small>
					
			
						<div class="inputBox">
							<input type="submit" onClick="createBattle()" value="Create" />
						</div>
					</div>
				</div>
			</div>
	</section>
	<script src="./socketevents.js"> </script>
		<script>


async function createBattle() {
  let format = document.getElementById("code").value.trim().toLowerCase();
  let team1 = document.getElementById("team1").value;
  let team2 = document.getElementById("team2").value;
  let allow = document.getElementById("allow").checked;


 
let rt = false;

if(!format.includes("random")) {
    if(team1.length < 10 || team2.length < 10) {
        let yn = confirm("You have chosen a format which requires input teams and you have not provided the teams, Would you still like to continue with random teams?")
        if(!yn) return;

		rt = true;
    }
}


let data = {
    "format" : format,
    "teams" : [team1,team2],
	"randteam" : rt,
	"allowteam" : allow

  }


if(format.includes("random")) { 
    let data = {
    "format" : format,
  }
}

try {
    const response = await fetch(serverAddress + "/create" , {
      method: "POST", // or 'PUT'
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify(data),
    });

    const result = await response.json();
    
    console.log(result)
    if(result.success) {
        alert("Your Battle Secret : " + result.data)
    
    }
  } catch (error) {
    console.error("Error:", error);
  }
}




		</script>
	</body>
</html>
